<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: commonHead('Iniciar Sesión')}"></head>

<body>
	<div th:replace="fragments/navbar :: navbar"></div>

	<div class="container property-review-layout">

		<section class="details">

			<h2 th:text="${property.title}" class="property-title"></h2>

			<div class="gallery" th:if="${property.images != null and !property.images.isEmpty()}">

				<div class="main-image">
					<img th:src="@{'/assets/' + ${property.images[0].imageUrl}}" alt="Imagen principal" />
				</div>

				<div class="image-grid">
					<div th:each="img, iterStat : ${property.images}"
						th:if="${iterStat.index > 0 and iterStat.index < 5}">
						<img th:src="@{'/assets/' + ${img.imageUrl}}" alt="Imagen secundaria" />
					</div>
				</div>

			</div>

			<div class="property-info-wrapper">

				<div class="property-attributes">
					<div class="attribute-card">
						<p class="attribute-label">Ubicación:</p>
						<p class="attribute-value" th:text="${property.location}">Ubicación</p>
					</div>
					<div class="attribute-card">
						<p class="attribute-label">Descripción:</p>
						<p class="attribute-value" th:text="${property.description}">Descripción</p>
					</div>
					<div class="attribute-card">
						<p class="attribute-label">Precio por noche:</p>
						<p class="attribute-value"
							th:text="|$${#numbers.formatDecimal(property.pricePerNight, 1, 2)} USD|">Precio</p>
					</div>
					<div class="attribute-card">
						<p class="attribute-label">Máx. Huéspedes:</p>
						<p class="attribute-value" th:text="${property.maxGuests}">Cantidad</p>
					</div>
				</div>


				<div class="property-rating">
					<img src="/assets/estrella.jpeg" alt="Estrella" />
					<span th:text="${#numbers.formatDecimal(property.rating, 1, 1)}">4.5</span>
				</div>

			</div>

			<a th:if="${property.host != null and property.host.id != null and currentUser != null and currentUser.id != null and property.host.id != currentUser.id}"
				th:href="@{/reservation/create-reservation(propertyId=${property.id})}" class="back-button">Reservar</a>

			<a th:if="${property.host != null and property.host.id != null and currentUser != null and currentUser.id != null and property.host.id != currentUser.id}"
				th:href="@{'/message/start-conversation/' + ${property.id}}" class="back-button">Contactar Anfitrión</a>
				
		</section>

	</div>

	<div th:replace="fragments/footer :: footer"></div>
</body>

</html>